{"ast":null,"code":"var _jsxFileName = \"G:\\\\tour-management\\\\tour-management\\\\frontend\\\\src\\\\pages\\\\updateCreateTour.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { BASE_URL } from './../utils/config';\nimport { Container, Form, Button } from 'reactstrap';\nimport '../styles/tourform.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TourForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [tourData, setTourData] = useState({\n    title: '',\n    desc: '',\n    price: '',\n    city: '',\n    distance: '',\n    maxGroupSize: '',\n    address: '',\n    photo: null // added photo state\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (id) {\n      setLoading(true);\n      // Fetch existing tour data for editing\n      fetch(`${BASE_URL}/tours/${id}`).then(res => res.json()).then(data => {\n        setTourData(data.data);\n        setLoading(false);\n      }).catch(err => {\n        setError('Failed to load tour data');\n        setLoading(false);\n      });\n    }\n  }, [id]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      const method = id ? 'PUT' : 'POST';\n      const endpoint = id ? `/tours/${id}` : '/tours';\n      const formData = new FormData();\n      // Adding form data including photo\n      Object.keys(tourData).forEach(key => {\n        formData.append(key, tourData[key]);\n      });\n      const response = await fetch(`${BASE_URL}${endpoint}`, {\n        method,\n        body: formData\n      });\n      if (!response.ok) {\n        const result = await response.json();\n        setError(result.message);\n        setLoading(false);\n        return;\n      }\n      alert('Tour saved successfully');\n      navigate('/admin');\n    } catch (error) {\n      setError('Error saving tour');\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    setTourData(prevState => ({\n      ...prevState,\n      [name]: files ? files[0] : value // handle file input\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"tour-form-container classroom\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: id ? 'Update Tour' : 'Create New Tour'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 23\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          value: tourData.title,\n          onChange: handleChange,\n          placeholder: \"Title\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"desc\",\n          value: tourData.desc,\n          onChange: handleChange,\n          placeholder: \"Description\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"price\",\n          value: tourData.price,\n          onChange: handleChange,\n          placeholder: \"Price\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"city\",\n          value: tourData.city,\n          onChange: handleChange,\n          placeholder: \"City\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"distance\",\n          value: tourData.distance,\n          onChange: handleChange,\n          placeholder: \"Distance\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"maxGroupSize\",\n          value: tourData.maxGroupSize,\n          onChange: handleChange,\n          placeholder: \"Max Group Size\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"address\",\n          value: tourData.address,\n          onChange: handleChange,\n          placeholder: \"Address\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), tourData.photo && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current-photo\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: tourData.photo // This will display the current image\n            ,\n            alt: \"Current Tour\",\n            style: {\n              width: '200px',\n              height: 'auto',\n              marginBottom: '15px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Current Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"photo\",\n          onChange: handleChange,\n          accept: \"image/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          color: \"primary\",\n          disabled: loading,\n          children: loading ? 'Saving...' : 'Save Tour'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(TourForm, \"D+PMmo+FxKvTp1UB6p2P+iHev7E=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = TourForm;\nexport default TourForm;\nvar _c;\n$RefreshReg$(_c, \"TourForm\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","BASE_URL","Container","Form","Button","TourForm","id","navigate","tourData","setTourData","title","desc","price","city","distance","maxGroupSize","address","photo","loading","setLoading","error","setError","fetch","then","res","json","data","catch","err","handleSubmit","e","preventDefault","method","endpoint","formData","FormData","Object","keys","forEach","key","append","response","body","ok","result","message","alert","handleChange","name","value","files","target","prevState","width","height","marginBottom"],"sources":["G:/tour-management/tour-management/frontend/src/pages/updateCreateTour.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { BASE_URL } from './../utils/config';\r\nimport { Container, Form, Button } from 'reactstrap';\r\nimport '../styles/tourform.css';\r\n\r\nconst TourForm = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [tourData, setTourData] = useState({\r\n    title: '',\r\n    desc: '',\r\n    price: '',\r\n    city: '',\r\n    distance: '',\r\n    maxGroupSize: '',\r\n    address: '',\r\n    photo: null, // added photo state\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      setLoading(true);\r\n      // Fetch existing tour data for editing\r\n      fetch(`${BASE_URL}/tours/${id}`)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          setTourData(data.data);\r\n          setLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          setError('Failed to load tour data');\r\n          setLoading(false);\r\n        });\r\n    }\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      setLoading(true);\r\n      const method = id ? 'PUT' : 'POST';\r\n      const endpoint = id ? `/tours/${id}` : '/tours';\r\n      const formData = new FormData();\r\n      // Adding form data including photo\r\n      Object.keys(tourData).forEach((key) => {\r\n        formData.append(key, tourData[key]);\r\n      });\r\n\r\n      const response = await fetch(`${BASE_URL}${endpoint}`, {\r\n        method,\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const result = await response.json();\r\n        setError(result.message);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      alert('Tour saved successfully');\r\n      navigate('/admin');\r\n    } catch (error) {\r\n      setError('Error saving tour');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    setTourData((prevState) => ({\r\n      ...prevState,\r\n      [name]: files ? files[0] : value, // handle file input\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <section className=\"tour-form-container classroom\">\r\n      <Container>\r\n        <Form onSubmit={handleSubmit}>\r\n          <h1>{id ? 'Update Tour' : 'Create New Tour'}</h1>\r\n          {loading && <p>Loading...</p>}\r\n          {error && <p className=\"error-message\">{error}</p>}\r\n\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={tourData.title}\r\n            onChange={handleChange}\r\n            placeholder=\"Title\"\r\n            required\r\n          />\r\n          <textarea\r\n            name=\"desc\"\r\n            value={tourData.desc}\r\n            onChange={handleChange}\r\n            placeholder=\"Description\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            value={tourData.price}\r\n            onChange={handleChange}\r\n            placeholder=\"Price\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"city\"\r\n            value={tourData.city}\r\n            onChange={handleChange}\r\n            placeholder=\"City\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"distance\"\r\n            value={tourData.distance}\r\n            onChange={handleChange}\r\n            placeholder=\"Distance\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"maxGroupSize\"\r\n            value={tourData.maxGroupSize}\r\n            onChange={handleChange}\r\n            placeholder=\"Max Group Size\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"address\"\r\n            value={tourData.address}\r\n            onChange={handleChange}\r\n            placeholder=\"Address\"\r\n            required\r\n          />\r\n\r\n          {/* Show current photo if available */}\r\n          {tourData.photo && (\r\n            <div className=\"current-photo\">\r\n              <img\r\n                src={tourData.photo} // This will display the current image\r\n                alt=\"Current Tour\"\r\n                style={{ width: '200px', height: 'auto', marginBottom: '15px' }}\r\n              />\r\n              <p>Current Photo</p>\r\n            </div>\r\n          )}\r\n\r\n          <input\r\n            type=\"file\"\r\n            name=\"photo\"\r\n            onChange={handleChange}\r\n            accept=\"image/*\"\r\n          />\r\n          <Button type=\"submit\" color=\"primary\" disabled={loading}>\r\n            {loading ? 'Saving...' : 'Save Tour'}\r\n          </Button>\r\n        </Form>\r\n      </Container>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default TourForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}